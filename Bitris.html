<html>
<head>
	<title>Bitris</title>
	<style>
		body{
			text-align: center;
		}
		table,td{
			border-collapse: collapse;
			border: 1px solid black;
			text-align: center;
			display: inline-block;
		}
		.nodisp{
			border: none;
		}
		.friendly{
			width: 25px;
			height: 25px;
		}
		.enemy{
			width: 10px;
			height: 10px;
		}
	</style>
	<script>
		var x = 0;
		var y = 0;
		var lastX = 0;
		var lastY = 0;
		
		function updateDEBUG(){
			document.getElementById("f" + lastY + "," + lastX).src = "";
			document.getElementById("f" + y + "," + x).src = "tetrisblue.gif";
			
			document.getElementById("DEBUG").innerHTML = "Current loc: (" + x + "," + y + ") --- Last loc: (" + lastX + "," + lastY + ")";
		}
		function processKeystroke(){
			var event = window.event ? window.event : e;
			//if (true) {
			//	alert(event.keyCode)
			//}
			if(event.keyCode == 37){
				// left
				if(x-1 >= 0) {lastX = x; lastY = y; x--;} 
				updateDEBUG();
			}
			if(event.keyCode == 38){
				// up
				if(y-1 >= 0) {lastX = x; lastY = y; y--; }
				updateDEBUG();
			}
			if(event.keyCode == 39){
				// right
				if(x+1 <= 15) {lastX = x; lastY = y; x++; }
				updateDEBUG();
			}
			if(event.keyCode == 40){
				// down
				if(y+1 <= 15) {lastX = x; lastY = y; y++;}
				updateDEBUG();
			}
		}
	</script>
</head>
<body onkeydown="processKeystroke()" onload="updateDEBUG()">
	<h1>Bittris!</h1>
	<br>
	<table class='nodisp'>
		<tr class='nodisp'>
			<td class='nodisp'>
				<table>
					<script>
						for(var i=0; i<16; i++){
							document.write("<tr>");
							for(var j=0; j<16; j++){
								document.write("<td class='friendly'><img class='friendly' id='f" + i + "," + j + "' src='' /></td>");
							}
							document.write("</tr>");
						}
					</script>
				</table>
			</td>
			<td class='nodisp'>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			</td>
			<td class='nodisp'>
				<table>
					<script>
						for(var i=0; i<16; i++){
							document.write("<tr>");
							for(var j=0; j<16; j++){
								document.write("<td class='enemy'><img class='enemy' id='e" + i + "," + j + "' src='' /></td>");
							}
							document.write("</tr>");
						}
					</script>
				</table>
			</td>
		</tr>
	</table>
	<p id="DEBUG"></p>
	</body>
</html>
